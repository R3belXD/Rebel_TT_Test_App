<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>üëë_ùï≠ùñéùñôùñç_üëë</title>
<style>
body {
  font-family: Arial, sans-serif;
  margin: 0;
  padding: 0;
  background: transparent;
  color: #f0f0f0;
}
/* Your overlay style */
#walletOverlay {
  display: block;
  position: fixed;
  top: 10vh;
  left: 10vw;
  width: 220px;
  min-height: 60px;
  max-height: 30vh;
  background: rgba(30,30,30,0.92);
  color: #fff;
  padding: 1rem 1.2rem;
  font-size: 1.2rem;
  border-radius: 10px;
  box-shadow: 0 4px 24px rgba(0,0,0,0.25);
  border: 4px solid transparent;
  border-image: linear-gradient(to right, cyan, purple) 1;
  z-index: 9999;
  overflow: auto;
}

/* Control panel for API & Player ID */
#apiContainer {
  display: block;
  position: fixed;
  top: calc(10vh + 250px);
  left: 10vw;
  background: rgba(35,39,43,0.7);
  padding: 0.5rem;
  border-radius: 12px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.10);
  z-index: 9999;
  max-width: 300px;
}
#apiContainer input {
  width: 100%;
  margin-bottom: 0.5rem;
  padding: 0.4rem;
  border-radius: 6px;
  border: 1px solid #444;
}
#apiContainer button {
  width: 100%;
  padding: 0.5rem;
  border-radius: 6px;
  border: none;
  background-color: #2d8cf0;
  color: #fff;
  font-weight: bold;
  cursor: pointer;
}
#apiContainer button:hover {
  background-color: #1e6fcf;
}

/* EXP popup */
#xpEarnedPopup {
  position: fixed;
  background: rgba(26, 148, 2, 0.9);
  color: #f1efef;
  padding: 8px 12px;
  border-radius: 8px;
  font-weight: bold;
  font-size: 1rem;
  opacity: 0;
  pointer-events: none;
  z-index: 99999;
  transition: opacity 0.5s, transform 0.5s;
}
</style>
</head>
<body>

<!-- Main overlay -->
<div id="walletOverlay" style="display:none;">Loading data...</div>

<!-- API & Player ID form -->
<div id="apiContainer">
  <label for="playerIdInput">Player ID:</label>
  <input type="text" id="playerIdInput" placeholder="Enter Player ID" />
  <label for="apiKeyInput">API Key:</label>
  <input type="text" id="apiKeyInput" placeholder="Enter API Key" />
  <button id="saveBtn">Save & Start</button>
</div>

<!-- EXP popup -->
<div id="xpEarnedPopup"></div>

<script>
(function() {
  const overlay = document.getElementById('walletOverlay');
  const playerIdInput = document.getElementById('playerIdInput');
  const apiKeyInput = document.getElementById('apiKeyInput');
  const saveBtn = document.getElementById('saveBtn');
  const popup = document.getElementById('xpEarnedPopup');

  let playerId = localStorage.getItem('playerId') || '';
  let apiKey = localStorage.getItem('apiKey') || '';

  // Set inputs from storage
  playerIdInput.value = playerId;
  apiKeyInput.value = apiKey;

  // Save button
  document.getElementById('saveBtn').addEventListener('click', () => {
    playerId = playerIdInput.value.trim();
    apiKey = apiKeyInput.value.trim();
    localStorage.setItem('playerId', playerId);
    localStorage.setItem('apiKey', apiKey);
    startFetching();
  });

  // Your API URL (replace with real endpoint)
  function getApiUrl() {
    return `https://your.api.endpoint/player/${encodeURIComponent(playerId)}?api_key=${encodeURIComponent(apiKey)}`;
  }

  let fetchInterval = null;
  async function fetchData() {
    if (!playerId || !apiKey) {
      overlay.innerHTML = "<b>Please enter Player ID and API Key.</b>";
      overlay.style.display = '';
      return;
    }
    try {
      const response = await fetch(getApiUrl());
      if (!response.ok) {
        overlay.innerHTML = "<b>Error fetching data. Check your API URL and credentials.</b>";
        overlay.style.display = '';
        return;
      }
      const data = await response.json();

      // Adjust based on your API's data structure
      const wallet = data.wallet ?? 'N/A';
      const xp = data.xp ?? 'N/A';
      const bonusXP = data.bonusXP ?? 'N/A';
      const job = data.job ?? 'N/A';
      const level = data.level ?? 'N/A';

      // Update overlay
      overlay.innerHTML = `
        <b>Job:</b> ${job}<br>
        <b>Level:</b> ${level}<br>
        <b>XP:</b> ${xp}<br>
        <b>Bonus XP Left:</b> ${bonusXP}<br>
        <b>Wallet:</b> ${Number(wallet).toLocaleString()}
      `;
      overlay.style.display = '';
    } catch(e) {
      overlay.innerHTML = "<b>Error fetching data.</b>";
      overlay.style.display = '';
      console.error(e);
    }
  }

  // Start periodic fetch
  function startFetching() {
    if (fetchInterval) clearInterval(fetchInterval);
    fetchData();
    fetchInterval = setInterval(fetchData, 30000);
  }

  // Load saved credentials on start
  if (playerId && apiKey) {
    startFetching();
  }

  // Optional: trigger fetch on page load if credentials exist
  if (playerId && apiKey) {
    // overlay will be updated by fetchData
  }
})();
</script>
</body>
</html>
